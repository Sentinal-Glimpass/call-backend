# Environment Configuration Template
# Copy this file to .env and fill in your secure values
# NEVER commit .env to version control

PORT=7999

# JWT Security (CRITICAL: Generate new secret for production)
JWT_SECRET=REPLACE_WITH_SECURE_64_CHAR_HEX_STRING
JWT_EXPIRES_IN=24h

# ArangoDB Database Configuration
ARANGO_HOST=your_arango_host
ARANGO_PORT=8529
ARANGO_USERNAME=your_username
ARANGO_PASSWORD=SECURE_PASSWORD_HERE
ARANGO_DATABASE=your_database_name
ARANGO_CA_CERT=BASE64_ENCODED_CERTIFICATE

# MongoDB Connection
MONGODB_URI=mongodb://username:password@host:port/database

# External API Keys (SECURE THESE)
DEEPGRAM_AUTH_TOKEN=your_deepgram_token
ELEVENLABS_API_KEY=your_elevenlabs_key
AZURE_OPENAI_API_KEY=your_azure_openai_key
AZURE_ENDPOINT=your_azure_endpoint
OPENAI_API_KEY=your_openai_key
OPENAI_MODEL=gpt-3.5-turbo

# Twilio Configuration
TWILIO_ACCOUNT_SID=your_twilio_sid
TWILIO_AUTH_TOKEN=your_twilio_token
TWILIO_PHONE_NUMBER=your_twilio_phone

# Exotel Configuration
EXOTEL_ACCOUNT_SID=your_exotel_sid
EXOTEL_AUTH_TOKEN=your_exotel_token
EXOTEL_AUTH_KEY=your_exotel_key
EXOTEL_PHONE_NUMBER=your_exotel_phone

# WhatsApp (WATI) - Legacy/Default Configuration (Use client-specific credentials instead)
# WATI_API_KEY=your_wati_api_key        # Legacy: Use client-specific credentials via API
# WATI_INSTANCE_ID=your_instance_id     # Legacy: Use client-specific credentials via API

# Plivo Configuration
PLIVO_AUTH_ID=your_plivo_id
PLIVO_AUTH_TOKEN=your_plivo_token
PLIVO_PHONE_NUMBER=your_plivo_phone

# Redis Configuration
REDIS_URL=redis://localhost:6379

# Security Threshold
THRESHOLD=0.8

# CORS Configuration (Production Security)
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://application.glimpass.com

# ===========================================
# ENHANCED TELEPHONY SYSTEM CONFIGURATION
# ===========================================

# Core Concurrency Management
GLOBAL_MAX_CALLS=50                    # Maximum calls across entire system (renamed for clarity)
DEFAULT_CLIENT_MAX_CONCURRENT_CALLS=10 # Default max calls per client (increased from 3)
MAX_CONCURRENT_CALL_WAIT=5000         # Wait time when concurrency limit reached (milliseconds)
SUBSEQUENT_CALL_WAIT=6000             # Wait time between consecutive calls (milliseconds)

# Bot Warmup Configuration (NEW)
BOT_WARMUP_URL=https://your-bot.com/warmup  # Bot warmup endpoint URL (GET request)
BOT_WARMUP_TIMEOUT=60000              # Timeout per warmup attempt (60 seconds)
BOT_WARMUP_RETRIES=3                  # Maximum warmup retry attempts

# Campaign & Call Management
CALL_TIMEOUT_MINUTES=10               # When to mark calls as timed out
CLEANUP_INTERVAL=300000               # Cleanup process interval (5 minutes in milliseconds)

# Cloud Run / Serverless Configuration (NEW)
HEARTBEAT_INTERVAL=30000              # Campaign heartbeat update interval (30 seconds)
ORPHAN_DETECTION_THRESHOLD=120000     # Stale heartbeat threshold (2 minutes in milliseconds)
CONTAINER_SHUTDOWN_GRACE=10000        # Grace period for container shutdown (milliseconds)

# Rate Limiting
MAX_CALLS_PER_MINUTE=10               # Maximum calls per minute per client
RATE_LIMIT_WINDOW=60000               # Rate limit window duration (1 minute)

# Monitoring Thresholds (NEW)
HIGH_UTILIZATION_THRESHOLD=80         # Alert when concurrency usage exceeds this percentage
FAILED_CALL_RATE_THRESHOLD=25         # Alert when failed call rate exceeds this percentage

# ===========================================
# BILLING SYSTEM CONFIGURATION
# ===========================================

# Cost Configuration
COST_PER_MINUTE_RUPEES=10             # Billing rate per minute in rupees

# Aggregation Timing Configuration
INCOMING_AGGREGATION_TIME=3600000     # Time before incoming calls can be aggregated (1 hour in milliseconds)

# Base URL Configuration
BASE_URL=http://your-domain.com:8080  # Base URL for webhooks and callbacks

# Call Lifecycle Timeouts (milliseconds)
MAX_PROCESSED_TIME=60000              # Maximum time call can stay in processed state (1 minute)
MAX_RINGING_TIME=180000               # Maximum time call can stay in ringing state (3 minutes)
MAX_ONGOING_TIME=3600000              # Maximum time call can stay in ongoing state (60 minutes)

# MarkAible AI Services
GROQ_API_KEY=your_groq_key_here       # Groq API key for AI prompt generation

# Razorpay Configuration
RAZORPAY_KEY_ID=your_razorpay_key_id_here     # Razorpay key ID for payment processing
RAZORPAY_KEY_SECRET=your_razorpay_secret_here # Razorpay secret for payment processing

# Google Cloud Storage Configuration
GCS_PROJECT_ID=halogen-segment-424319-n1    # Google Cloud project ID
GCS_BUCKET_NAME=call-backend-tools-attachments      # GCS bucket for file storage
GCS_KEY_FILE=path/to/service-account-key.json  # Path to GCS service account key file
# Alternative: use GCS_CREDENTIALS_JSON for base64 encoded credentials
# GCS_CREDENTIALS_JSON=base64_encoded_service_account_key

# Tools System Configuration
MASTER_KEY=your_64_char_master_key_for_encryption  # Master key for credential encryption (AES-256)
MAX_ATTACHMENT_SIZE=10485760          # Maximum attachment size in bytes (10MB)
ALLOWED_ATTACHMENT_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document  # Allowed MIME types

# Email Configuration - Legacy/Default (Use client-specific credentials instead)
# GMAIL_USER=your_email@gmail.com      # Legacy: Use client-specific email credentials via API
# GMAIL_PASSWORD=your_app_password     # Legacy: Use client-specific email credentials via API

# Bot Warmup Configuration (Enhanced)
BOT_WARMUP_ENABLED=true               # Enable/disable bot warmup feature